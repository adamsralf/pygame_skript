\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Grafikprimitive}\index{Grafikprimitive}

Unter Grafikprimitiven versteht man gezeichnete einfache grafische Figuren wie Linien, Punkte, Kreise etc. Sie spielen in der Spieleprogrammierung nicht so eine große Rolle, können aber manchmal ganz nützlich sein. Ich will hier deshalb nur einige vorstellen. 

\lstsource{SRC/00 Einführung/02 Primitive/primitives00.py}{1}{44}{python}{Mein zweites \emph{Spiel}, Version 1.0}{srcPrimitives00}

Der Grundaufbau ist der gleiche wie in \srcref[vref]{srcStart01}. Die Unterschiede beginnen in \zeiref{srcPrimitives01}. Die Klasse \texttt{pygame.Color}\randnotiz{Color}\myindex{pyg}{\texttt{Color}|underline} kann Farbinformationen in verschiedenen Formaten inklusive eines \glslink{alpha}{Alpha-Kanals}\index{Alpha-Kanal} (Transparenz) kodieren; mehr dazu später in \abschnittref[vref]{secBitmapLaden}. Ich verwende hier eine RGB-Kodierung mit Farbkanalwerten zwischen~0 und~255. 

Für die meisten Fälle brauche ich mir aber keine eigenen Farben zu definieren. Pygame stellt mir eine wirklich umfangreiche Liste von~664 vordefinierten Farbnamen zur Verfügung\randnotiz{Farbnamen}\index{Farbnamen}. Überall dort, wo Farbwerte erwartet werden, kann ich entweder eine \texttt{Color}-Objekt, einen Zahlencode oder einen Farbnamen als String übergeben.

\begin{wrapfigure}[18]{r}{7.8cm}%
	\begin{center}%
		\vspace{-1cm}%
		\myfigure{primitives.png}{0.4}{Einige Grafikprimitve}{picPrimitive}%
	\end{center}%
\end{wrapfigure}%
Gehen wir der Reihe nach die einzelnen Figuren durch und fangen mit dem Rechteck an. Es gibt mehrere Möglichkeiten, ein Rechteck in Pygame zu bestimmen. Da wir es später auch sehr oft brauchen, möchte ich hier schonmal die Klasse \texttt{pygame.Rect}\myindex{pyg}{\texttt{Rect}|underline}\randnotiz{Rect} einführen. Sie wird durch vier Parameter bestimmt: die linke obere Ecke, seine Breite und seine Höhe. In \zeiref{srcPrimitives02} wird also ein Rechteck an der Position $(10,10)$ mit der Breite von $20~px$ und einer Höhe von $30~px$ definiert. 

Hinweis: Die Klasse \texttt{Rect} ist kein gezeichnetes Rechteck, sondern lediglich ein Container für Informationen, die für ein Rechteck interessant sind. 

In \zeiref{srcPrimitives03} zeichnet \texttt{pygame.draw.rect()}\myindex{pyg}{\texttt{draw}!\texttt{rect()}}\randnotiz{rect()} ein gefülltes Rechteck. Die \Gls{semantik} der Parameter sollte selbsterklärend sein. Anders der Aufruf von \zeiref{srcPrimitives04}. Der erste Parameter hinter dem Rechteck -- hier \texttt{3} -- legt die Dicke der Linie fest. Ist dieser Parameter angegeben und größer~0, so wird das Rechteck nicht mehr ausgefüllt. Der Wert~\texttt{10} legt die Rundung der Ecken fest. Dort kann ein Wert von 0 bis $min(width, height)/2$ stehen, enspricht er doch dem Radius der Eckenrundung.

Allgemeiner als ein Rechteck ist ein \Gls{polygon}. Ein Polygon ist ein geschlossener Lienenzug, der in Pygame durch seine Punkte (Ecken) definiert wird. Ähnlich wie bei den Rechtecken, gibt es gefüllte (\zeiref{srcPrimitives06}) und ungefüllte (\zeiref{srcPrimitives07}) Varianten. Beide werden mit Hilfe von \texttt{pygame.draw.polygon()}\randnotiz{polygon()}\myindex{pyg}{\texttt{draw}!\texttt{polygon()}} gezeichnet. Vorsicht bei der Liniendicke: Diese wachsen nach außen, so dass bald hässliche Versatzstücke an den Ecken erkennbar werden. Probieren Sie es aus, indem Sie den Wert~\texttt{2} in~\texttt{5} ändern.

Für einzelne Linien gibt es \texttt{pygame.draw.line()}\myindex{pyg}{\texttt{draw}!\texttt{line()}}\randnotiz{line()} bzw. für einen -- hier ohne Beispiel -- \gls{linienzug} \texttt{pygame.draw.lines()}\myindex{pyg}{\texttt{draw}!\texttt{lines()}}\randnotiz{lines()}. Ein Beispiel finden Sie in \zeiref{srcPrimitives08}.

Ein Kreis wird durch zwei Angaben definiert: Mittelpunkt und Radius. In \zeiref{srcPrimitives09} wird mit \texttt{pygame.draw.circle()}\myindex{pyg}{\texttt{draw}!\texttt{circle()}}\randnotiz{circle()} ein gefüllter Kreis mit dem Mittelpunkt $(40, 150)$ und einem Radius von $30~px$ gezeichnet. Wie bei Rechtecken und Polygonen gibt es auch nicht gefüllte Varianten (\zeiref{srcPrimitives10}). Interessant ist der Kreisbogenausschnitt in \zeiref{srcPrimitives11}. Hier wird über boolsche Variablen gesteuert, welcher Abschnitt des Kreisbogens gezeichnet wird (Näheres in der Pygame-Referenz).

Zum Schluss noch einen kleine Farbenspielerei. Seltsamerweise gibt es in Pygame keine eigene Funktion zum Zeichnen eines einzelnen Punktes/Pixel. Ich habe hier mal drei Workarounds programmiert, die ich gefunden habe. Man könnte sich noch weitere überlegen: Eine Linie mit $start=ende$, ein Kreis mit dem Radius~1 usw.

In \zeiref{srcPrimitives12} wird der Punkt durch das Setzen eines einzelnen Farbwertes an einer Position mit \texttt{pygame.Surface.set\_at()}\myindex{pyg}{\texttt{Surface}!\texttt{set\_at()}}\randnotiz{set\_at()} gezeichnet. Man könnte auch die schon oben verwendete Surface-Funktion \texttt{fill()} mit einer Ausdehnung von nur einem Pixel Breite und Höhe verwenden (\zeiref{srcPrimitives13}). Ein Möglichkeit einen Pixel über eine Grafikbibliothek zu setzen, ist die experimentelle \texttt{gfxdraw}-Umgebung. In \zeiref{srcPrimitives14} wird mit \texttt{pygame.gfxdraw.pixel()}\myindex{pyg}{\texttt{gfxdraw}!\texttt{pixel()}}\randnotiz{pixel()} ein einzelnes Pixel gesetzt. Die \texttt{gfxdraw}-Umgebung wird nicht automatisch durch \texttt{import pygame} importiert (siehe \zeiref{srcPrimitives15}).

\subsection*{Was war neu?}

Mit Hilfe von Grafikprimitiven können eigene Zeichnungen erstellt und verwendet werden. Sie stehen meist in einer gefüllten und ungefüllten Variante zur Verfügung. Farben können selbst definiert werden oder aus einer Liste von vordefinierten Farben ausgewählt werden. 

Es wurden folgende Pygame-Elemente eingeführt:

\begin{itemize}
	\item Vordefnierte Farbnamen:\index{Farbennamen}\\ 
	\url{http://www.pygame.org/docs/ref/color_list.html}

	\item \texttt{import pygame.gfxdraw}:\\ \url{https://www.pygame.org/docs/ref/gfxdraw.html}
	
	\item \texttt{pygame.Color}:
	\myindex{pyg}{\texttt{Color}}\\
	\url{https://www.pygame.org/docs/ref/color.html}
	
	\item \texttt{pygame.draw.circle()}:
	\myindex{pyg}{\texttt{draw}!\texttt{circle()}}\\
	\url{https://www.pygame.org/docs/ref/draw.html#pygame.draw.circle}
	
	\item \texttt{pygame.draw.line()}:
	\myindex{pyg}{\texttt{draw}!\texttt{line()}}\\
	\url{https://www.pygame.org/docs/ref/draw.html#pygame.draw.line}
	
	\item \texttt{pygame.draw.lines()}:
	\myindex{pyg}{\texttt{draw}!\texttt{lines()}}\\
	\url{https://www.pygame.org/docs/ref/draw.html#pygame.draw.lines}
	
	\item \texttt{pygame.draw.polygon()}:
	\myindex{pyg}{\texttt{draw}!\texttt{polygon()}}\\
	\url{https://www.pygame.org/docs/ref/draw.html#pygame.draw.polygon}
	
	\item \texttt{pygame.draw.rect()}:
	\myindex{pyg}{\texttt{draw}!\texttt{rect()}}\\
	\url{https://www.pygame.org/docs/ref/draw.html#pygame.draw.rect}
	
	\item \texttt{pygame.gfxdraw.pixel()}:
    \myindex{pyg}{\texttt{gfxdraw}!\texttt{pixel()}}\\ \url{https://www.pygame.org/docs/ref/gfxdraw.html#pygame.gfxdraw.pixel}

	\item \texttt{pygame.Rect}:
	\myindex{pyg}{\texttt{Rect}}\\
	\url{https://www.pygame.org/docs/ref/rect.html}
	
	\item \texttt{pygame.Surface.set\_at()}:
	\myindex{pyg}{\texttt{Surface}!\texttt{set\_at()}}\\
	\url{https://www.pygame.org/docs/ref/surface.html#pygame.Surface.set_at}
	
\end{itemize}

